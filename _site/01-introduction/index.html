















<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2021-10-06 06:55:35 -0700">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/lesson.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/syntax.css" />

    



    <!-- Favicons for everyone -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../assets/favicons/swc/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/favicons/swc/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/favicons/swc/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/favicons/swc/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../assets/favicons/swc/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../assets/favicons/swc/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../assets/favicons/swc/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../assets/favicons/swc/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="Software Carpentry - ATLAS CMake"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="../assets/favicons/swc/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="../assets/favicons/swc/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="../assets/favicons/swc/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="../assets/favicons/swc/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="../assets/favicons/swc/mstile-310x310.png" />


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

  <title>
  Introduction to ATLAS Offline Software &ndash; ATLAS CMake
  </title>  

  </head>
  <body>

    


<div class="panel panel-default life-cycle">
  <div id="life-cycle" class="panel-body pre-alpha">
    This lesson is still being designed and assembled (Pre-Alpha version)
  </div>
</div>





    <div class="container">
      






<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      
      <a href="https://software-carpentry.org" class="pull-left">
        <img class="navbar-logo" src="../assets/img/swc-icon-blue.svg" alt="Software Carpentry logo" />
      </a>
      

      
      <a class="navbar-brand" href="../index.html">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="../CODE_OF_CONDUCT.html">Code of Conduct</a></li>

        
	
        <li><a href="../setup.html">Setup</a></li>

        
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            <li><a href="../01-introduction/index.html">Introduction to ATLAS Offline Software</a></li>
            
            <li><a href="../02-workspace/index.html">Your Workspace</a></li>
            
            <li><a href="../03-toplevelcmake/index.html">The Top-Level CMakeLists.txt</a></li>
            
            <li><a href="../04-packagecmake/index.html">The Package CMakeLists.txt</a></li>
            
            <li><a href="../05-coffee/index.html">Coffee break!</a></li>
            
            <li><a href="../06-addcalibration/index.html">Calibrate Your Jets</a></li>
            
            <li><a href="../07-modifyingathena/index.html">Modyfing an Athena Package</a></li>
            
	    <li role="separator" class="divider"></li>
            <li><a href="../aio/index.html">All in one page (Beta)</a></li>
          </ul>
        </li>
	

	
	
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../reference.html">Reference</a></li>
            
            <li><a href="../about/index.html">About</a></li>
            
            <li><a href="../discuss/index.html">Discussion</a></li>
            
            <li><a href="../figures/index.html">Figures</a></li>
            
            <li><a href="../guide/index.html">Instructor Notes</a></li>
            
          </ul>
        </li>
	

	
        <li><a href="../LICENSE.html">License</a></li>
	
	<li><a href="/edit//_episodes/01-introduction.md" data-checker-ignore>Improve this page <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></li>
	
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>

















<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span><span class="sr-only">lesson home</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
    <h3 class="maintitle"><a href="../">ATLAS CMake</a></h3>
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../02-workspace/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>

<article>
<div class="row">
  <div class="col-md-1">
  </div>
  <div class="col-md-10">
    <h1 class="maintitle">Introduction to ATLAS Offline Software</h1>
  </div>
  <div class="col-md-1">
  </div>
</div>


<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 20 min
      <br/>
      <strong>Exercises:</strong> 0 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>What is atlas/athena and what release should I be using?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Introduce the athena repository.</p>
</li>
	
	<li><p>Define the concept of a <em>package</em>.</p>
</li>
	
	<li><p>Define the contect of a <em>project</em>.</p>
</li>
	
	<li><p>Describe what a release means.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>In this episodes, we hope to introduce the organization of the ATLAS software (athena).</p>

<h1 id="what-is-athena">What is Athena?</h1>
<p>All of the central ATLAS software is stored in a public repository called <a href="https://gitlab.cern.ch/atlas/athena">Athena</a>. It contains all of the code used for simulation, data reconstruction, triggering, calibration and object identification.</p>

<p>This lesson will not touch any of this source code in detail. How to develop new Athena software is covered in the <a href="https://atlassoftwaredocs.web.cern.ch/athena/">official ATLAS documentation</a>. Instead we will focus on <em>using</em> the pre-compiled versions of a few athena packages.</p>

<h1 id="athena-packages">Athena Packages</h1>
<p>The Athena repository contains several packages. A single package is a collection of related libraries, programs and other supporting files that are maintained by a dedicated group of developers. For example, the <code class="language-plaintext highlighter-rouge">Reconstruction/Jet/JetCalibTools/JetCalibTools</code> package contains all of the code necessary to calibrate jets.</p>

<p>Each package, for example <code class="language-plaintext highlighter-rouge">Package</code>, is a directory with the following structure:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Package/</code>: All of the header files, where <code class="language-plaintext highlighter-rouge">Package</code> is replaced with the package’s name</li>
  <li><code class="language-plaintext highlighter-rouge">Root/</code>: All of the source code of the library</li>
  <li><code class="language-plaintext highlighter-rouge">util/</code>: Any executables that are part of the package</li>
  <li><code class="language-plaintext highlighter-rouge">share/</code>: Supporting files (ie: example settings, small calibration files)</li>
  <li><code class="language-plaintext highlighter-rouge">CMakeLists.txt</code>: The file that tells cmake how this package is organized.</li>
</ul>

<p>The structure itself is very flexible. Technically, only the <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> file is required to be there. However maintaining consistency across the experiment is very important for code readability.</p>

<p>You can also have packages outside of the athena repository. For example, you can think of your analysis code as an external package.</p>

<h1 id="projects-and-releases">Projects and Releases</h1>
<p>The entire athena repository is huge and has many dependencies between its packages. New code is being added all the time. To keep everything stable, there is a complex release procedure for “public” code.</p>

<p>First of all, there is the concept of an athena project. An athena project is a collection of packages required to accomplish a certain task. For example, if you only care to analyze events, then you don’t need all of the infrastrucure used during detector operation. Reducing the package list to only what is required has several advantages:</p>
<ul>
  <li>Reduce the size of the compiled release. This is useful if you want to create a container that can run on your laptop.</li>
  <li>Allow for different release and validation cycles. Packages used for operation need to be stable and require lot of validation. Packages related to calibration can be updated quite often with latest and greatest features.</li>
</ul>

<p>The following list of projects has been taken from the <a href="https://atlassoftwaredocs.web.cern.ch/athena/athena-intro/">ATLAS Software Documentation</a>.</p>

<table>
  <thead>
    <tr>
      <th>Project</th>
      <th>Purpose</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Athena</td>
      <td>Functional for event generation, simulation, digitisation reconstruction and DAOD derivations (but rarely validated for anything except digi+reco)</td>
    </tr>
    <tr>
      <td>AthenaP1</td>
      <td>Used to run the High Level Trigger and online monitoring at P1</td>
    </tr>
    <tr>
      <td>AthGeneration</td>
      <td>For event generation</td>
    </tr>
    <tr>
      <td>AthSimulation</td>
      <td>For full Geant4 simulation</td>
    </tr>
    <tr>
      <td>AthDerivation</td>
      <td>For generating derived AODs from AOD and Athena based analysis</td>
    </tr>
    <tr>
      <td>AthAnalysisBase</td>
      <td>Athena based analysis</td>
    </tr>
    <tr>
      <td>AnalysisBase</td>
      <td>Non-athena ROOT based analysis</td>
    </tr>
  </tbody>
</table>

<p>Each project is released independently and versioned using the following scheme: <code class="language-plaintext highlighter-rouge">A.B.X[.Y]</code>, where</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">A</code>: The <em>release series</em>. For example, release 21 is what you’ll be using for all Run 2 data.</li>
  <li><code class="language-plaintext highlighter-rouge">B</code>: The <em>release flavour</em>. Each flavour targets a different goal. For example, rlavour 2 is used for analysis while upgrade studies happen in flavour 9. Keeping code synchronized between flavours is very complicated and we don’t suggest using the ATLAS scheme for this.</li>
  <li><code class="language-plaintext highlighter-rouge">X</code>: The <em>major release</em> number. Automatically incremented when there is a new release for public consumption.</li>
  <li><code class="language-plaintext highlighter-rouge">Y</code>: Optional <em>minor release</em>. In case a small bug fix is necessary for a major release.</li>
</ul>

<p>The official releases are compiled and copied to CVMFS. For certail projects, Docker images are also prepared (more on this tomorrow!).</p>

<blockquote class="challenge">
  <h2 id="our-projectrelease">Our Project,Release</h2>

  <p>Our goal is to analyze data using a very lightweight framework. What project and release will we be using? (Hint: It is in the form of <code class="language-plaintext highlighter-rouge">Project,A.B.125</code>).</p>

  <blockquote class="solution">
    <h2 id="solution">Solution</h2>

    <p>We will be using <code class="language-plaintext highlighter-rouge">AnalysisBase,21.2.125</code>. We need the <code class="language-plaintext highlighter-rouge">AnalysisBase</code> project to get the basic tools without the full environment and release <code class="language-plaintext highlighter-rouge">21.2</code> is designed for analyzing Run 2 data. The minor release, <code class="language-plaintext highlighter-rouge">125</code>, was the latest one available at the time of writing.</p>
  </blockquote>
</blockquote>

<h1 id="contribution-to-athena">Contribution to Athena</h1>
<p>You might be asked to improve or fix a package inside the athena repository during your career in ATLAS. The procedure for doing so is very straightforward, if you are paying attention this week. It uses a lot of the git workflow (yesterday) and CI validation (tomorrow) that we are covering. However we will not go into details of submitting a merge request to <code class="language-plaintext highlighter-rouge">atlas/athena</code>. It is very nicely documented in the <a href="https://atlassoftwaredocs.web.cern.ch/gittutorial/">ATLAS Software Documentation</a>.</p>



<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Athena is a collection of common packages that are compiled and released regulariy.</p>
</li>
    
    <li><p>Your analysis project is just an external package.</p>
</li>
    
  </ul>
</blockquote>

</article>
















<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span><span class="sr-only">lesson home</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../02-workspace/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>


      
      






<footer>
  <div class="row">
    <div class="col-md-6 copyright" align="left">
	
	Licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY 4.0</a> 2018–2021
	by <a href="https://carpentries.org/">The Carpentries</a>
        <br>
        Licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY 4.0</a> 2016–2018
	by <a href="https://software-carpentry.org">Software Carpentry Foundation</a>
	
    </div>
    <div class="col-md-6 help-links" align="right">
	
	<a href="/edit//_episodes/01-introduction.md" data-checker-ignore>Edit on GitHub</a>
	
	/
	<a href="/blob//CONTRIBUTING.md" data-checker-ignore>Contributing</a>
	/
	<a href="/">Source</a>
	/
	<a href="/blob//CITATION" data-checker-ignore>Cite</a>
	/
	<a href="mailto:kkrizka@gmail.com">Contact</a>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" align="center">
      Using <a href="https://github.com/carpentries/styles/">The Carpentries style</a>
      version <a href="https://github.com/carpentries/styles/releases/tag/v9.5.3">9.5.3</a>.
    </div>
  </div>
</footer>

      
    </div>
    
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
